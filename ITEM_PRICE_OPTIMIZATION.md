# 物品出售价格系统优化说明

## 优化目标
将默认物品出售价格从数据库中移除，改为在读取时动态获取默认值，以减少数据库存储量，提高表单响应速度。

## 主要修改

### 1. ItemPriceDatabase 类优化

#### 新增方法：
- `getAllCustomPrices()`: 只返回数据库中实际存储的自定义物品出售价格
- `removePrice(itemId)`: 删除自定义物品出售价格，恢复使用默认物品出售价格
- `hasCustomPrice(itemId)`: 检查是否有自定义物品出售价格
- `getDefaultPrice(itemId)`: 获取默认物品出售价格
- `getAllDefaultItemIds()`: 获取所有有默认物品出售价格的物品ID列表

#### 修改方法：
- `getPrice(itemId)`: 优先返回自定义物品出售价格，否则返回默认物品出售价格（不存储到数据库）
- `getAllPrices()`: 保持兼容性，返回所有物品出售价格（自定义+默认）
- `resetToDefaultPrices()`: 改为删除所有自定义物品出售价格，而不是重置为默认值

### 2. 表单界面优化

#### 物品出售价格管理主界面：
- 显示当前自定义物品出售价格数量和默认物品出售价格数量
- 按钮文本更改为"浏览自定义物品出售价格"和"删除所有自定义物品出售价格"

#### 自定义物品出售价格列表：
- 只显示有自定义物品出售价格的物品
- 显示价格对比指示器（↑↓=）
- 显示默认物品出售价格作为参考

#### 编辑物品出售价格表单：
- 区分自定义物品出售价格和默认物品出售价格
- 提供删除自定义物品出售价格的选项
- 显示默认物品出售价格作为参考

#### 搜索功能：
- 搜索所有物品（包括默认物品出售价格的物品）
- 显示价格状态指示器

#### 手动修改表单：
- 支持删除自定义物品出售价格（留空输入）
- 显示默认物品出售价格信息
- 验证物品是否有默认物品出售价格

## 优化效果

### 数据库存储优化：
- 不再存储所有默认物品出售价格到数据库
- 只存储管理员自定义的物品出售价格
- 大幅减少数据库大小

### 性能优化：
- 表单加载速度显著提升
- 减少内存占用
- 避免大量数据导致的卡顿

### 用户体验优化：
- 清晰区分自定义物品出售价格和默认物品出售价格
- 提供价格对比指示器
- 支持删除自定义物品出售价格恢复默认
- 更好的搜索和浏览体验

## 兼容性

- 保持 `getAllPrices()` 方法兼容现有代码
- 保持 `getPrice()` 方法的行为一致
- 现有功能不受影响

## 使用建议

1. **日常管理**：使用"浏览自定义物品出售价格"功能查看和管理自定义物品出售价格
2. **搜索物品**：使用搜索功能查找特定物品的出售价格
3. **批量重置**：使用"删除所有自定义物品出售价格"功能快速恢复默认设置
4. **单个管理**：在编辑界面可以单独删除或修改自定义物品出售价格

## 技术细节

- 默认物品出售价格存储在 `itemsByGold.ts` 配置文件中
- 自定义物品出售价格存储在 `itemPrices` 数据库中
- 读取时优先检查数据库，没有则返回默认物品出售价格
- 删除自定义物品出售价格时从数据库中移除对应记录 